
@namespace(uri="http://yamtl.github.io/code", prefix="code")
package code;



class EcommerceApplication {
    op void main(EString[0..*] args);
}
    
abstract interface OrderRepository {
}
    
abstract interface CategoryRepository extends extends {
}
    
abstract interface ProductRepository {
}
    
class Category {
    attr int[0..1] ~id;
    attr EString[0..1] categoryName;
    val Product[0..*]#category products;
}
    
class OrdersController extends RestController {
    ref OrderRepository[1..1] orderRepository;
}
    
class Order {
    attr int[0..1] ~id;
    attr EDate[0..1] creationDate;
    ref Product[0..*]#order products;
    val Map[0..*] productQuantities;
    ref OrderStatus[0..1] status;
}
    
class ProductQueryResolver extends GraphQLQueryResolver {
    ref ProductRepository[1..1] productRepository;
}
    
class Product {
    attr int[0..1] ~id;
    attr EString[0..1] productName;
    attr EString[0..1] description;
    attr double[0..1] price;
    attr EDate[0..1] createDate;
    ref Category[0..1]#products category;
    ref Order[0..*]#orderItems orderItems;
}
    
class CategoriesController {
    ref CategoryRepository[1..1] categoryRepository;
    op ResponseEntity[0..1] saveCategory(Category[0..1] category);
    op ResponseEntity[0..1] updateCategory(Category[0..1] category);
    op ResponseEntity[0..1] deleteCategory(Category[0..1] category);
}
    
class ProductMutationResolver extends GraphQLMutationResolver {
    ref ProductRepository[1..1] productRepository;
    op Product[1..1] saveProduct(Product[1..1] product);
    op Product[1..1] updateProduct(Product[1..1] product);
    op String[0..1] deleteProduct(int[0..1] ~id);
}
    
@dependency
abstract class extends {
}
    
@dependency
abstract interface RestController {
}
    
@dependency
abstract class OrderStatus {
}
    
@dependency
abstract class Map {
}
    
@dependency
abstract interface GraphQLQueryResolver {
}
    
@dependency
abstract class ResponseEntity {
}
    
@dependency
abstract interface GraphQLMutationResolver {
}
    
enum OrderStatus {
	NEW;
	PROCESSING;
	SHIPPED;
	DELIVERED;

}
